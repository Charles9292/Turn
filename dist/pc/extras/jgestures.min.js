!function(e){function t(e){e.startMove=e.startMove?e.startMove:{startX:null,startY:null,timestamp:null};var t,s,r=(new Date).getTime();return e.touches&&(s=[{lastX:e.deltaX,lastY:e.deltaY,moved:null,startX:e.screenX-e.startMove.screenX,startY:e.screenY-e.startMove.screenY}],t={vector:e.vector||null,orientation:window.orientation||null,lastX:s[0].lastX>0?1:s[0].lastX<0?-1:0,lastY:s[0].lastY>0?1:s[0].lastY<0?-1:0,startX:s[0].startX>0?1:s[0].startX<0?-1:0,startY:s[0].startY>0?1:s[0].startY<0?-1:0},s[0].moved=Math.sqrt(Math.pow(Math.abs(s[0].startX),2)+Math.pow(Math.abs(s[0].startY),2))),{type:e.type||null,originalEvent:e.event||null,delta:s||null,direction:t||{orientation:window.orientation||null,vector:e.vector||null},duration:e.duration?e.duration:e.startMove.timestamp?r-e.timestamp:null,rotation:e.rotation||null,scale:e.scale||null,description:e.description||[e.type,":",e.touches,":",0!=s[0].lastX?s[0].lastX>0?"right":"left":"steady",":",0!=s[0].lastY?s[0].lastY>0?"down":"up":"steady"].join("")}}function s(t){var s=["landscape:clockwise:","portrait:default:","landscape:counterclockwise:","portrait:upsidedown:"];e(window).triggerHandler("orientationchange",{direction:{orientation:window.orientation},description:["orientationchange:",s[window.orientation/90+1],window.orientation].join("")})}function r(s){var r,a,n,o=jQuery(window),i=o.data("ojQueryGestures"),c=e.jGestures.defaults.thresholdShake,u=i.oDeviceMotionLastDevicePosition||{accelerationIncludingGravity:{x:0,y:0,z:0},shake:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeleftright:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakefrontback:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeupdown:{eventCount:0,intervalsPassed:0,intervalsFreeze:0}},h={accelerationIncludingGravity:{x:s.accelerationIncludingGravity.x,y:s.accelerationIncludingGravity.y,z:s.accelerationIncludingGravity.z},shake:{eventCount:u.shake.eventCount,intervalsPassed:u.shake.intervalsPassed,intervalsFreeze:u.shake.intervalsFreeze},shakeleftright:{eventCount:u.shakeleftright.eventCount,intervalsPassed:u.shakeleftright.intervalsPassed,intervalsFreeze:u.shakeleftright.intervalsFreeze},shakefrontback:{eventCount:u.shakefrontback.eventCount,intervalsPassed:u.shakefrontback.intervalsPassed,intervalsFreeze:u.shakefrontback.intervalsFreeze},shakeupdown:{eventCount:u.shakeupdown.eventCount,intervalsPassed:u.shakeupdown.intervalsPassed,intervalsFreeze:u.shakeupdown.intervalsFreeze}};for(r in i){switch(r){case"shake":case"shakeleftright":case"shakefrontback":case"shakeupdown":if(a=[],[],a.push(r),++h[r].intervalsFreeze>c.freezeShakes&&h[r].intervalsFreeze<2*c.freezeShakes)break;h[r].intervalsFreeze=0,h[r].intervalsPassed++,"shake"!==r&&"shakeleftright"!==r||!(h.accelerationIncludingGravity.x>c.leftright.sensitivity||h.accelerationIncludingGravity.x<-1*c.leftright.sensitivity)||(a.push("leftright"),a.push("x-axis")),"shake"!==r&&"shakefrontback"!==r||!(h.accelerationIncludingGravity.y>c.frontback.sensitivity||h.accelerationIncludingGravity.y<-1*c.frontback.sensitivity)||(a.push("frontback"),a.push("y-axis")),"shake"!==r&&"shakeupdown"!==r||!(h.accelerationIncludingGravity.z+9.81>c.updown.sensitivity||h.accelerationIncludingGravity.z+9.81<-1*c.updown.sensitivity)||(a.push("updown"),a.push("z-axis")),a.length>1&&(++h[r].eventCount==c.requiredShakes&&h[r].intervalsPassed<c.freezeShakes?(o.triggerHandler(r,t({type:r,description:a.join(":"),event:s,duration:5*h[r].intervalsPassed})),h[r].eventCount=0,h[r].intervalsPassed=0,h[r].intervalsFreeze=c.freezeShakes+1):h[r].eventCount==c.requiredShakes&&h[r].intervalsPassed>c.freezeShakes&&(h[r].eventCount=0,h[r].intervalsPassed=0))}n={},n.oDeviceMotionLastDevicePosition=h,o.data("ojQueryGestures",e.extend(!0,i,n))}}function a(t){var s=jQuery(t.currentTarget);s.triggerHandler(e.jGestures.events.touchstart,t),e.hasGestures?(t.currentTarget.addEventListener("touchmove",n,!1),t.currentTarget.addEventListener("touchend",o,!1)):(s.bind("mousemove",n),s.bind("mouseup",o));var r=s.data("ojQueryGestures"),a=t.touches?t.touches[0]:t,i={};i.oLastSwipemove={screenX:a.screenX,screenY:a.screenY,timestamp:(new Date).getTime()},i.oStartTouch={screenX:a.screenX,screenY:a.screenY,timestamp:(new Date).getTime()},s.data("ojQueryGestures",e.extend(!0,r,i))}function n(s){var r,a=jQuery(s.currentTarget),n=a.data("ojQueryGestures"),o=!!s.touches,i=o?s.changedTouches[0].screenX:s.screenX,c=o?s.changedTouches[0].screenY:s.screenY,u=n.oLastSwipemove,h=i-u.screenX,d=c-u.screenY;n.oLastSwipemove&&(r=t({type:"swipemove",touches:o?s.touches.length:"1",screenY:c,screenX:i,deltaY:d,deltaX:h,startMove:u,event:s,timestamp:u.timestamp}),a.triggerHandler(r.type,r));var l={},p=s.touches?s.touches[0]:s;l.oLastSwipemove={screenX:p.screenX,screenY:p.screenY,timestamp:(new Date).getTime()},a.data("ojQueryGestures",e.extend(!0,n,l))}function o(s){var r=jQuery(s.currentTarget),a=!!s.changedTouches,i=a?s.changedTouches.length:"1",c=a?s.changedTouches[0].screenX:s.screenX,u=a?s.changedTouches[0].screenY:s.screenY;r.triggerHandler(e.jGestures.events.touchendStart,s),e.hasGestures?(s.currentTarget.removeEventListener("touchmove",n,!1),s.currentTarget.removeEventListener("touchend",o,!1)):(r.unbind("mousemove",n),r.unbind("mouseup",o));var h,d,l,p,v,g,w=r.data("ojQueryGestures"),f=Math.abs(w.oStartTouch.screenX-c)>e.jGestures.defaults.thresholdMove||Math.abs(w.oStartTouch.screenY-u)>e.jGestures.defaults.thresholdMove,y=Math.abs(w.oStartTouch.screenX-c)>e.jGestures.defaults.thresholdSwipe||Math.abs(w.oStartTouch.screenY-u)>e.jGestures.defaults.thresholdSwipe,k=["zero","one","two","three","four"];for(h in w){switch(d=w.oStartTouch,{},c=a?s.changedTouches[0].screenX:s.screenX,u=a?s.changedTouches[0].screenY:s.screenY,l=c-d.screenX,p=u-d.screenY,v=t({type:"swipe",touches:i,screenY:u,screenX:c,deltaY:p,deltaX:l,startMove:d,event:s,timestamp:d.timestamp}),g=!1,h){case"swipeone":if(a===!1&&1==i&&f===!1)break;(a===!1||1==i&&f===!0&&y===!0)&&(g=!0,v.type=["swipe",k[i]].join(""),r.triggerHandler(v.type,v));break;case"swipetwo":a&&2==i&&f===!0&&y===!0&&(g=!0,v.type=["swipe",k[i]].join(""),r.triggerHandler(v.type,v));break;case"swipethree":a&&3==i&&f===!0&&y===!0&&(g=!0,v.type=["swipe",k[i]].join(""),r.triggerHandler(v.type,v));break;case"swipefour":a&&4==i&&f===!0&&y===!0&&(g=!0,v.type=["swipe",k[i]].join(""),r.triggerHandler(v.type,v));break;case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":a&&f===!0&&y===!0&&(g=!0,v.type=["swipe",0!=v.delta[0].lastX?v.delta[0].lastX>0?"right":"left":"",0!=v.delta[0].lastY?v.delta[0].lastY>0?"down":"up":""].join(""),r.triggerHandler(v.type,v));break;case"tapone":case"taptwo":case"tapthree":case"tapfour":f!==!0&&g!==!0&&k[i]==h.slice(3)&&(v.description=["tap",k[i]].join(""),v.type=["tap",k[i]].join(""),r.triggerHandler(v.type,v))}var j={};r.data("ojQueryGestures",e.extend(!0,w,j)),r.data("ojQueryGestures",e.extend(!0,w,j))}r.triggerHandler(e.jGestures.events.touchendProcessed,s)}function i(t){var s=jQuery(t.currentTarget);s.triggerHandler(e.jGestures.events.gesturestart,t);var r=s.data("ojQueryGestures"),a={};a.oStartTouch={timestamp:(new Date).getTime()},s.data("ojQueryGestures",e.extend(!0,r,a))}function c(s){var r,a,n,o,i=jQuery(s.currentTarget),c=i.data("ojQueryGestures");for(o in c)switch(o){case"pinch":r=s.scale,(r<1&&r%1<1-e.jGestures.defaults.thresholdPinchclose||r>1&&r%1>e.jGestures.defaults.thresholdPinchopen)&&(a=r<1?-1:1,n=t({type:"pinch",scale:r,touches:null,startMove:c.oStartTouch,event:s,timestamp:c.oStartTouch.timestamp,vector:a,description:["pinch:",a,":",r<1?"close":"open"].join("")}),i.triggerHandler(n.type,n));break;case"rotate":r=s.rotation,(r<1&&-1*r>e.jGestures.defaults.thresholdRotateccw||r>1&&r>e.jGestures.defaults.thresholdRotatecw)&&(a=r<1?-1:1,n=t({type:"rotate",rotation:r,touches:null,startMove:c.oStartTouch,event:s,timestamp:c.oStartTouch.timestamp,vector:a,description:["rotate:",a,":",r<1?"counterclockwise":"clockwise"].join("")}),i.triggerHandler(n.type,n))}}function u(s){var r=jQuery(s.currentTarget);r.triggerHandler(e.jGestures.events.gestureendStart,s);var a,n,o=r.data("ojQueryGestures");for(n in o)switch(n){case"pinchclose":a=s.scale,a<1&&a%1<1-e.jGestures.defaults.thresholdPinchclose&&r.triggerHandler("pinchclose",t({type:"pinchclose",scale:a,vector:-1,touches:null,startMove:o.oStartTouch,event:s,timestamp:o.oStartTouch.timestamp,description:"pinch:-1:close"}));break;case"pinchopen":a=s.scale,a>1&&a%1>e.jGestures.defaults.thresholdPinchopen&&r.triggerHandler("pinchopen",t({type:"pinchopen",scale:a,vector:1,touches:null,startMove:o.oStartTouch,event:s,timestamp:o.oStartTouch.timestamp,description:"pinch:+1:open"}));break;case"rotatecw":a=s.rotation,a>1&&a>e.jGestures.defaults.thresholdRotatecw&&r.triggerHandler("rotatecw",t({type:"rotatecw",rotation:a,vector:1,touches:null,startMove:o.oStartTouch,event:s,timestamp:o.oStartTouch.timestamp,description:"rotate:+1:clockwise"}));break;case"rotateccw":a=s.rotation,a<1&&-1*a>e.jGestures.defaults.thresholdRotateccw&&r.triggerHandler("rotateccw",t({type:"rotateccw",rotation:a,vector:-1,touches:null,startMove:o.oStartTouch,event:s,timestamp:o.oStartTouch.timestamp,description:"rotate:-1:counterclockwise"}))}r.triggerHandler(e.jGestures.events.gestureendProcessed,s)}e.jGestures={},e.jGestures.defaults={},e.jGestures.defaults.thresholdShake={requiredShakes:10,freezeShakes:100,frontback:{sensitivity:10},leftright:{sensitivity:10},updown:{sensitivity:10}},e.jGestures.defaults.thresholdPinchopen=.05,e.jGestures.defaults.thresholdPinchmove=.05,e.jGestures.defaults.thresholdPinch=.05,e.jGestures.defaults.thresholdPinchclose=.05,e.jGestures.defaults.thresholdRotatecw=5,e.jGestures.defaults.thresholdRotateccw=5,e.jGestures.defaults.thresholdMove=20,e.jGestures.defaults.thresholdSwipe=100,e.jGestures.data={},e.jGestures.data.capableDevicesInUserAgentString=["iPad","iPhone","iPod","Mobile Safari"],e.jGestures.data.hasGestures=function(){var t;for(t=0;t<e.jGestures.data.capableDevicesInUserAgentString.length;t++)if(navigator.userAgent.indexOf(e.jGestures.data.capableDevicesInUserAgentString[t])!==-1)return!0;return!1}(),e.hasGestures=e.jGestures.data.hasGestures,e.jGestures.events={touchstart:"jGestures.touchstart",touchendStart:"jGestures.touchend;start",touchendProcessed:"jGestures.touchend;processed",gesturestart:"jGestures.gesturestart",gestureendStart:"jGestures.gestureend;start",gestureendProcessed:"jGestures.gestureend;processed"},jQuery.each({orientationchange_orientationchange01:"orientationchange",gestureend_pinchopen01:"pinchopen",gestureend_pinchclose01:"pinchclose",gestureend_rotatecw01:"rotatecw",gestureend_rotateccw01:"rotateccw",gesturechange_pinch01:"pinch",gesturechange_rotate01:"rotate",touchstart_swipe13:"swipemove",touchstart_swipe01:"swipeone",touchstart_swipe02:"swipetwo",touchstart_swipe03:"swipethree",touchstart_swipe04:"swipefour",touchstart_swipe05:"swipeup",touchstart_swipe06:"swiperightup",touchstart_swipe07:"swiperight",touchstart_swipe08:"swiperightdown",touchstart_swipe09:"swipedown",touchstart_swipe10:"swipeleftdown",touchstart_swipe11:"swipeleft",touchstart_swipe12:"swipeleftup",touchstart_tap01:"tapone",touchstart_tap02:"taptwo",touchstart_tap03:"tapthree",touchstart_tap04:"tapfour",devicemotion_shake01:"shake",devicemotion_shake02:"shakefrontback",devicemotion_shake03:"shakeleftright",devicemotion_shake04:"shakeupdown"},function(t,h){jQuery.event.special[h]={setup:function(){var n,o,h=t.split("_"),d=h[0],l=h[1].slice(0,h[1].length-2),p=jQuery(this);if(!p.data("ojQueryGestures")||!p.data("ojQueryGestures")[d])if(n=p.data("ojQueryGestures")||{},o={},o[d]=!0,e.extend(!0,n,o),p.data("ojQueryGestures",n),e.hasGestures)switch(l){case"orientationchange":p.get(0).addEventListener("orientationchange",s,!1);break;case"shake":case"shakefrontback":case"shakeleftright":case"shakeupdown":case"tilt":p.get(0).addEventListener("devicemotion",r,!1);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":p.get(0).addEventListener("touchstart",a,!1);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":p.get(0).addEventListener("gesturestart",i,!1),p.get(0).addEventListener("gestureend",u,!1);break;case"pinch":case"rotate":p.get(0).addEventListener("gesturestart",i,!1),p.get(0).addEventListener("gesturechange",c,!1)}else switch(l){case"tap":case"swipe":p.bind("mousedown",a)}return!1},add:function(e){return jQuery(this).data("ojQueryGestures")[e.type]={originalType:e.type},!1},remove:function(e){var t=jQuery(this),s=t.data("ojQueryGestures");return s[e.type]=!1,t.data("ojQueryGestures",s),!1},teardown:function(){var h,d,l=t.split("_"),p=l[0],v=l[1].slice(0,l[1].length-2),g=jQuery(this);if(!g.data("ojQueryGestures")||!g.data("ojQueryGestures")[p])if(h=g.data("ojQueryGestures")||{},d={},d[p]=!1,e.extend(!0,h,d),g.data("ojQueryGestures",h),e.hasGestures)switch(v){case"orientationchange":g.get(0).removeEventListener("orientationchange",s,!1);break;case"shake":case"shakefrontback":case"shakeleftright":case"shakeupdown":case"tilt":g.get(0).removeEventListener("devicemotion",r,!1);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":g.get(0).removeEventListener("touchstart",a,!1),g.get(0).removeEventListener("touchmove",n,!1),g.get(0).removeEventListener("touchend",o,!1);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":g.get(0).removeEventListener("gesturestart",i,!1),g.get(0).removeEventListener("gestureend",u,!1);break;case"pinch":case"rotate":g.get(0).removeEventListener("gesturestart",i,!1),g.get(0).removeEventListener("gesturechange",c,!1)}else switch(v){case"tap":case"swipe":g.unbind("mousedown",a),g.unbind("mousemove",n),g.unbind("mouseup",o)}return!1}}})}(jQuery);